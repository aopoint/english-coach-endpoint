<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>English Coach</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="stylesheet" href="/app.css" />
</head>
<body>

  <!-- Header -->
  <header class="topbar glass">
    <div class="brand">
      <span class="logo-swatch" aria-hidden="true"></span>
      <span>English Coach</span>
    </div>

    <nav class="topnav">
      <button id="btnFeedback" class="link">Feedback</button>
      <div class="auth">
        <button id="btnAuth" class="link">Log in / Register</button>
        <button id="btnSignOut" class="link hidden">Sign out</button>
        <span id="userBadge" class="badge hidden"></span>
      </div>
    </nav>
  </header>

  <main class="wrap">
    <!-- Left column -->
    <aside class="col col-left">
      <section class="card">
        <h2 class="h">Record for <span class="accent">60â€“90</span> seconds.</h2>
        <p class="muted">Weâ€™ll analyze fluency & correctness, then show key corrections and a next prompt.</p>
      </section>

      <section class="card">
        <h3 class="h">Goal</h3>
        <div id="goals" class="goal-row">
          <button class="pill active" data-goal="Work English">Work English</button>
          <button class="pill" data-goal="Daily Life">Daily Life</button>
          <button class="pill" data-goal="Interview Prep">Interview Prep</button>
          <button class="pill" data-goal="Travel">Travel</button>
          <button class="pill" data-goal="Presentation">Presentation</button>
        </div>
      </section>

      <section class="card">
        <h3 class="h">Recording</h3>

        <div class="rec-controls">
          <button id="btnStart" class="btn primary">
            <span class="ic play" aria-hidden="true"></span> Start recording
          </button>
          <button id="btnStop" class="btn" disabled>
            <span class="ic stop" aria-hidden="true"></span> Stop
          </button>
        </div>

        <div class="timer-row">
          <div id="timer" class="timer">00:00</div>
          <div class="progress"><div id="meter" class="bar"></div></div>
        </div>

        <button id="btnSend" class="cta" disabled>
          <span class="spinner hidden" aria-hidden="true"></span>
          <span class="cta-label">Send & Analyze</span>
        </button>
      </section>

      <section class="card">
        <h3 class="h">What to say to start</h3>
        <div id="prompt" class="prompt">Describe a recent project you led and one lesson you learned.</div>
        <button id="btnRnd" class="btn icon">
          <span class="ic dice" aria-hidden="true"></span> Randomize prompt
        </button>
      </section>

      <section class="card tight">
        <div class="stats-row">
          <div class="chip">Level: <b id="levelLabel">â€“</b></div>
          <div class="chip">Fillers: <b id="fillers">0</b></div>
          <div class="chip">Sessions: <b id="sessions">0</b></div>
          <div class="chip">Streak: <b id="streak">0</b> <span aria-hidden="true">ðŸ”¥</span></div>
        </div>
      </section>
    </aside>

    <!-- Right column -->
    <section class="col col-right">
      <div class="card meta-row">
        <span id="liveChip" class="live idle">
          <span class="dot" aria-hidden="true"></span><span id="liveText">Idle</span>
        </span>
        <div class="chips">
          <div class="chip">Level: <b id="levelLabelTop">â€“</b></div>
          <div class="chip">Fillers: <b id="fillersTop">0</b></div>
          <div class="chip">Sessions: <b id="sessionsTop">0</b></div>
          <div class="chip">Streak: <b id="streakTop">0</b> <span aria-hidden="true">ðŸ”¥</span></div>
        </div>
      </div>

      <section class="card">
        <h3 class="h section-title">Pronunciation</h3>
        <div id="pronBox" class="list"></div>
      </section>

      <section class="card">
        <h3 class="h section-title">Grammar</h3>
        <div id="gramBox" class="list"></div>
      </section>

      <section class="card">
        <h3 class="h section-title">What to fix now</h3>
        <div id="fixBox" class="note">â€“</div>
      </section>

      <section class="card">
        <h3 class="h section-title">Next prompt (30â€“45s)</h3>
        <div id="nextBox" class="note">â€“</div>
      </section>

      <section class="card">
        <h3 class="h section-title">Leaderboard</h3>
        <div id="board" class="note">You â€” 0 session (sign in for public board).</div>
      </section>
    </section>
  </main>

  <footer class="footer">
    <span>Â© 2025 <a class="link" href="https://simpleia.com" target="_blank">Simpleia</a> â€” Built by <a class="link" href="https://aosama.net" target="_blank">Abdo Osama</a></span>
    <span id="ver" class="muted">v0.0.0</span>
  </footer>

  <!-- Feedback modal -->
  <dialog id="feedbackModal" class="modal">
    <form method="dialog" class="modal-body">
      <header class="modal-head">
        <h3 class="h">Quick feedback (optional)</h3>
        <button type="button" class="icon-x" id="fbClose" aria-label="Close"></button>
      </header>

      <div class="grid2">
        <input id="fbName" type="text" placeholder="Your name" />
        <input id="fbEmail" type="email" placeholder="Email (optional)" />
      </div>

      <div class="stars" id="stars" aria-label="Rating">
        <button type="button" data-v="1">â˜…</button>
        <button type="button" data-v="2">â˜…</button>
        <button type="button" data-v="3">â˜…</button>
        <button type="button" data-v="4">â˜…</button>
        <button type="button" data-v="5">â˜…</button>
      </div>

      <textarea id="fbText" rows="5" placeholder="Any ideas to improve?"></textarea>

      <footer class="modal-actions">
        <button id="fbSkip" type="button" class="btn">Skip</button>
        <button id="fbSend" type="button" class="btn primary">Submit feedback & Continue</button>
      </footer>
    </form>
  </dialog>

  <!-- Auth modal -->
  <dialog id="authModal" class="modal">
    <form method="dialog" class="modal-body">
      <header class="modal-head">
        <h3 class="h">Sign in</h3>
        <button type="button" class="icon-x" id="authClose" aria-label="Close"></button>
      </header>

      <div class="auth-grid">
        <button id="authGoogle" type="button" class="btn wide">
          Continue with Google
        </button>
        <button id="authFacebook" type="button" class="btn wide">
          Continue with Facebook
        </button>
      </div>

      <div class="magic">
        <input id="authEmail" type="email" placeholder="you@email.com" />
        <button id="authEmailLink" type="button" class="btn primary wide">Email sign-in link</button>
      </div>
    </form>
  </dialog>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/config.js"></script>
  <script src="/app.js"></script>
</body>
</html>
