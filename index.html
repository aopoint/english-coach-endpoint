<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1"
  />
  <title>English Coach â€” Instant Feedback</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect rx='22' width='100' height='100' fill='%237c3aed'/%3E%3C/svg%3E" />
  <link rel="stylesheet" href="/styles.css" />
  <!-- Load Supabase first, then your config, then app.js -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/config.js"></script>
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>English Coach</h1>
      </div>
      <div class="auth">
        <span id="userName" class="muted">Guest</span>
        Â· <a href="#" id="signinLink">Sign in</a>
        <span class="hide"> Â· <a href="#" id="signoutLink">Sign out</a></span>
      </div>
    </header>

    <main class="grid">
      <!-- LEFT: Goal + Recording (one card) -->
      <section class="card left">
        <div class="title">
          <div class="t1">Record for 60â€“90 seconds.</div>
          <div class="sub">Weâ€™ll analyze fluency & correctness, then show key corrections and a next prompt.</div>
        </div>

        <div class="block">
          <h3>Goal</h3>
          <div class="goals" id="goals">
            <button class="chip active" data-goal="Work English">Work English</button>
            <button class="chip" data-goal="Daily Life">Daily Life</button>
            <button class="chip" data-goal="Interview Prep">Interview Prep</button>
            <button class="chip" data-goal="Travel">Travel</button>
            <button class="chip" data-goal="Presentation">Presentation</button>
          </div>

          <div class="row" style="margin-top:12px">
            <button id="btnStart" class="btn btn-brand">â–¶ï¸Ž Start recording</button>
            <button id="btnStop"  class="btn btn-dim" disabled>â–  Stop</button>
          </div>

          <div class="row" style="margin-top:12px">
            <div class="timer" id="timer">00:00</div>
            <div class="meter"><span id="meter"></span></div>
          </div>

          <div class="row" style="margin-top:12px">
            <button id="btnSend" class="btn btn-brand" disabled>Send & Analyze</button>
          </div>

          <div class="sep"></div>

          <h3>What to say to start</h3>
          <div id="prompt" class="note">
            Describe a recent project you led and one lesson you learned.
          </div>
          <div class="row" style="margin-top:10px">
            <button id="btnRnd" class="btn btn-ghost">ðŸŽ² Randomize prompt</button>
            <span class="pill"><span id="liveDot" class="dot"></span><span id="liveText">Idle</span></span>
          </div>
        </div>
      </section>

      <!-- RIGHT: Results -->
      <section class="card right">
        <div class="block">
          <div class="row headrow">
            <div class="live">
              <span class="dot" id="liveDotTop"></span><span id="liveTextTop">Idle</span>
            </div>
            <div class="badges">
              <span class="badge">Level: <b id="levelLabel">â€“</b></span>
              <span class="badge">Fillers: <b id="fillers">0</b></span>
              <span class="badge">Sessions: <b id="sessions">0</b></span>
              <span class="badge">Streak: <b id="streak">0</b> ðŸ”¥</span>
              <span class="badge badge-dim">v<span id="ver">â€”</span></span>
            </div>
          </div>

          <h3>Pronunciation</h3>
          <div id="pronBox" class="panel">
            <div class="result muted">â€“</div>
          </div>

          <h3>Grammar</h3>
          <div id="gramBox" class="panel">
            <div class="result muted">â€“</div>
          </div>

          <h3>What to fix now</h3>
          <div id="fixBox" class="result">â€“</div>

          <h3>Next prompt (30â€“45s)</h3>
          <div id="nextBox" class="result">â€“</div>

          <h3>Leaderboard</h3>
          <div id="leadBox" class="result">Public leaderboard requires sign-in. Youâ€™ll still see your local totals below.</div>
        </div>
      </section>
    </main>

    <footer>
      Â© 2025 <a href="https://simpleia.com" target="_blank">Simpleia</a> â€” Built by
      <a href="https://aosama.net" target="_blank">Abdo Osama</a>
      Â· <span id="verFoot"></span>
    </footer>
  </div>

  <script src="/app.js"></script>
</body>
</html>
