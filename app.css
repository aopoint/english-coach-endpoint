:root{
  --bg:#0f1115; --panel:#151922; --panel-2:#11141b; --glass: rgba(255,255,255,.04);
  --muted:#aab; --text:#e8ebff; --accent1:#7a5cff; --accent2:#5a8dff;
  --pill:#1b2030; --chip:#1a1f2b; --green:#32d29f; --red:#ff5a79;
}

*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:400 16px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Apple Color Emoji","Segoe UI Emoji"}
a{color:var(--accent2);text-decoration:none}
.hidden{display:none!important}

.topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:linear-gradient(180deg,rgba(10,12,16,.7),rgba(10,12,16,.4));backdrop-filter:blur(10px);border-bottom:1px solid #1b1f2a}
.brand{display:flex;gap:10px;align-items:center;font-weight:700;letter-spacing:.2px}
.logo-icon{width:18px;height:18px;color:var(--accent2)}
.topnav{display:flex;gap:16px;align-items:center}
.auth{display:flex;gap:12px;align-items:center}
.link{background:transparent;border:0;color:var(--muted);cursor:pointer;font:inherit}
.link:hover{color:#fff}
.badge{background:var(--chip);border:1px solid #23293a;padding:6px 10px;border-radius:999px;font-size:13px}
.avatar{width:28px;height:28px;border-radius:50%;border:1px solid #23293a;object-fit:cover}

.wrap{display:grid;grid-template-columns:360px 1fr;gap:22px;max-width:1100px;margin:20px auto;padding:0 16px}
.col{display:flex;flex-direction:column;gap:18px}
.card{background:var(--panel);border:1px solid #1b1f2a;border-radius:14px;padding:16px}
.card.tight{padding:12px}
.glass{box-shadow:0 8px 30px rgba(0,0,0,.22)}
.h{margin:0 0 8px 0;font-weight:700}
.accent{color:var(--accent2)}
.muted{color:var(--muted)}
.section-title{margin-top:4px}

.goal-row{display:flex;flex-wrap:wrap;gap:8px}
.pill{background:var(--pill);border:1px solid #21273a;color:#dbe3ff;border-radius:12px;padding:10px 12px;font-weight:600;cursor:pointer}
.pill.active{background:linear-gradient(135deg,var(--accent1),var(--accent2));border:0;color:#fff;box-shadow:0 10px 30px rgba(90,140,255,.25)}
.pill:focus-visible{outline:2px solid var(--accent2);outline-offset:2px}

.btn{background:var(--panel-2);border:1px solid #242a3a;color:#e9ecff;border-radius:12px;padding:12px 14px;display:inline-flex;align-items:center;gap:10px;cursor:pointer}
.btn.primary{background:linear-gradient(135deg,var(--accent1),var(--accent2));border:0;color:#fff;box-shadow:0 10px 30px rgba(90,140,255,.25)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.btn.icon{margin-top:10px}
.btn.icon .emoji{font-size:18px;margin-right:6px}

.ic{width:14px;height:14px;display:inline-block;position:relative;top:1px}
.ic.play{border-left:14px solid #fff;border-top:9px solid transparent;border-bottom:9px solid transparent;margin-right:2px}
.ic.stop{width:12px;height:12px;background:#bbb;border-radius:2px}

.rec-controls{display:flex;gap:12px;align-items:center}

.timer-row{display:flex;align-items:center;gap:14px;margin:14px 0}
.timer{font:700 44px/1 "SF Pro Rounded",ui-rounded,system-ui,Segoe UI,Roboto}
.progress{flex:1;height:10px;background:#1a1f2b;border-radius:999px;overflow:hidden}
.bar{height:100%;width:0;background:linear-gradient(90deg,#23d2a6,#7a5cff)}

.cta{width:100%;margin-top:10px;display:flex;align-items:center;justify-content:center;gap:10px;border-radius:18px;background:linear-gradient(120deg,var(--accent1),var(--accent2));border:0;color:#fff;padding:18px 20px;cursor:pointer}
.spinner{width:18px;height:18px;border-radius:999px;border:3px solid rgba(255,255,255,.25);border-top-color:#fff;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.stats-row{display:flex;gap:8px;flex-wrap:wrap}
.chip{background:var(--chip);border:1px solid #23293a;border-radius:999px;padding:8px 12px;font-size:14px;color:#cfe}
.meta-row{display:flex;align-items:center;gap:12px}
.meta-row .chips{display:flex;gap:8px;flex-wrap:wrap}

.live{display:inline-flex;align-items:center;gap:8px;background:var(--chip);border:1px solid #23293a;border-radius:999px;padding:8px 12px}
.live .dot{width:9px;height:9px;border-radius:50%}
.live.idle .dot{background:#7f8598}
.live.live .dot{background:#2affb9;box-shadow:0 0 12px #2affb9}
#liveText{font-weight:600}

.list{display:flex;flex-direction:column;gap:10px;min-height:44px}
.note{min-height:28px}

.prompt{background:var(--panel-2);border:1px solid #242a3a;border-radius:12px;padding:12px;margin-bottom:10px}

.footer{max-width:1100px;margin:30px auto 50px;display:flex;align-items:center;justify-content:space-between;color:var(--muted);padding:0 16px}

/* Modals */
.modal{border:0;padding:0;background:transparent}
.modal::backdrop{background:rgba(0,0,0,.55);backdrop-filter:blur(2px)}
.modal-body{min-width:min(720px,90vw);background:var(--panel);border:1px solid #1b1f2a;border-radius:16px;padding:16px}
.modal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.icon-x{width:28px;height:28px;border-radius:8px;border:1px solid #262c3c;background:#171b25;cursor:pointer}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.auth-grid{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:12px}
.magic{display:grid;grid-template-columns:1fr auto;gap:10px}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:14px}
textarea, input[type="text"], input[type="email"]{width:100%;background:var(--panel-2);border:1px solid #242a3a;color:#fff;border-radius:10px;padding:12px}
.stars{display:flex;gap:8px;margin:10px 0 6px}
.stars button{background:#1a1f2b;border:1px solid #242a3a;border-radius:8px;color:#bfb4ff;font-size:20px;line-height:1;padding:8px 10px;cursor:pointer}
.stars button.active{background:linear-gradient(135deg,var(--accent1),var(--accent2));border:0;color:#fff}

@media (max-width:1000px){
  .wrap{grid-template-columns:1fr}
  .col-right{order:2}
  .col-left{order:1}
  .grid2,.auth-grid,.magic{grid-template-columns:1fr}
}

/* --- Feedback modal: default hidden --- */
#fbBack, #fbBox { display: none; }
#fbBack.open, #fbBox.open { display: block; }
