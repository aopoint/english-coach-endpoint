:root{
  --bg:#0d1017; --panel:#151924; --card:#0f131b;
  --muted:#9aa4b2; --text:#e7ecf5; --brand1:#7B5CFF; --brand2:#4985F8;
  --ok:#10b981; --warn:#f59e0b; --err:#ef4444; --glass:rgba(255,255,255,.04);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial;
  background:radial-gradient(80rem 80rem at 70% -10%, #171b26 20%, var(--bg) 60%);
  color:var(--text);
}

/* Header */
.topbar{
  position:sticky; top:0; z-index:5; display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:14px 18px; backdrop-filter: blur(10px); background:var(--glass); border-bottom:1px solid #1f2430;
}
.glass{background:var(--glass); backdrop-filter: blur(10px)}
.brand{display:flex; align-items:center; gap:10px; font-weight:700}
.logo{width:22px; height:22px}
.actions{display:flex; align-items:center; gap:14px}
.link{background:none; border:none; color:#cfe0ff; cursor:pointer; font:inherit}
.link:hover{text-decoration:underline}
.link.danger{color:#fca5a5}

.user-chip{display:flex; align-items:center; gap:8px; padding:4px 8px; background:#0d1220; border-radius:16px}
.avatar{width:22px; height:22px; border-radius:50%; display:none}

/* Layout */
.wrap{display:grid; grid-template-columns: minmax(300px,420px) 1fr; gap:20px; padding:16px}
.panel{
  background:var(--panel); border:1px solid #1f2430; border-radius:16px; padding:16px; margin-bottom:16px;
}
.panel h2{margin:0 0 8px 0}
.panel h3{margin:0 0 8px 0; padding-top:4px}
.sub{color:var(--muted)}
.em{color:#c7d2ff}

/* Chips */
.chips{display:flex; flex-wrap:wrap; gap:10px}
.chip{
  background:#0f1422; color:#cde; border:1px solid #222a3a; padding:10px 14px; border-radius:14px; cursor:pointer
}
.chip--active, .chip:hover{background:linear-gradient(135deg,var(--brand1),var(--brand2)); color:#fff; border-color:transparent}

/* Buttons */
.btn{border:1px solid #273047; background:#101525; color:#dfe7ff; border-radius:14px; padding:10px 14px; cursor:pointer}
.btn-ghost{background:#0f1422}
.btn-primary{background:linear-gradient(135deg,var(--brand1),var(--brand2)); border:none}
.btn[disabled]{opacity:.55; cursor:not-allowed}
.ico{display:inline-block; width:1.1em; text-align:center; margin-right:8px}

/* CTA */
.cta{
  width:100%; margin-top:14px; border:none; color:#fff; font-weight:600; font-size:1.1rem;
  background:linear-gradient(135deg,var(--brand1),var(--brand2));
  border-radius:18px; padding:18px; display:flex; align-items:center; justify-content:center; gap:12px
}
.spinner{
  width:18px;height:18px;border:3px solid #cbd5ff;border-top-color:transparent;border-radius:50%;
  animation:spin 1s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Recording */
.row{display:flex; gap:10px; align-items:center}
.right{justify-content:flex-end}
.record-line{display:grid; grid-template-columns:120px 1fr; gap:14px; align-items:center; margin:14px 0}
.timer{background:#0f1422; border:1px solid #20273a; border-radius:14px; padding:12px 16px; font-weight:800; letter-spacing:1px; text-align:center}
.prog{height:10px; background:#0e1320; border:1px solid #232a3a; border-radius:999px; overflow:hidden}
.prog__bar{height:100%; width:0; background:linear-gradient(90deg,#ef4444,#f59e0b,#10b981)}

/* Cards & stats */
.card{background:var(--card); border:1px solid #1f2430; border-radius:12px; padding:12px; min-height:52px; white-space:pre-wrap}
.stats{display:flex; gap:10px; flex-wrap:wrap}
.stat{background:#0e1320; border:1px solid #1f2430; border-radius:999px; padding:8px 12px; color:#dbe3ff}
.badge{background:#0e1320; border:1px solid #273047; border-radius:999px; padding:6px 10px; color:#cbd5ff}

/* Prompt */
.prompt textarea{width:100%; background:#0f1422; border:1px solid #222a3a; color:#e6eeff; border-radius:12px; padding:10px}
.prompt__actions{display:flex; align-items:center; justify-content:space-between; margin-top:8px}

/* Inputs */
.input{background:#0f1422; border:1px solid #222a3a; color:#e8efff; border-radius:12px; padding:10px; width:100%}

/* Modals */
.modal{position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.55)}
.modal__inner{width:min(720px,92vw); background:#0f131b; border:1px solid #293043; border-radius:16px; padding:16px}
.modal__close{float:right; background:#121827; border:1px solid #273047; border-radius:10px; color:#cfe; cursor:pointer; padding:6px 10px}
.white{color:#fff}
.muted{color:var(--muted)}
.stars{display:flex; gap:12px; margin:10px 0}
.stars button{font-size:22px; background:none; border:none; cursor:pointer; color:#b9c0ff}
.stars button.active{color:#f5c542}

/* Footer */
.footer{opacity:.6; display:flex; justify-content:flex-end; margin-top:8px}

/* --- Feedback modal safety / visibility --- */
#fbBack,
#fbBox { display: none; }

#fbBack.open,
#fbBox.open { display: block; }

/* Optional: prevent click-through when open */
#fbBack.open { pointer-events: auto; }
#fbBack { pointer-events: none; }
